--
-- Create Schema Script
--   Database Version            : 19.0.0.0.0
--   Database Compatible Level   : 19.0.0.0.0
--   Script Compatible Level     : 19.0.0.0.0
--   Toad Version                : 15.1.113.1379
--   DB Connect String           : TEST
--   Schema                      : ADMIN
--   Script Created by           : ADMIN
--   Script Created at           : 9/22/2025 10:00:25 PM
--   Notes                       : 
--

-- Object Counts: 
--   Roles: 2           System Privileges: 237  Roles: 17           Grants: 234 
--   Users: 1           System Privileges: 1    Roles: 2                 
--   Tablespaces: 2     Datafiles: 1        Tempfiles: 1 
-- 
--   Directories: 14 
--   Indexes: 19        Columns: 19         
--   Object Privileges: 4 
--   Procedures: 3      Lines of Code: 114 
--   Sequences: 13 
--   Tables: 15         Columns: 74         Constraints: 62     
--   Triggers: 8 
--   Views: 5           Columns: 24         


-- "Set define off" turns off substitution variables.
Set define off; 

--
-- DATA_PUMP_DIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
DATA_PUMP_DIR AS 
'C:\app\ORA193X64DB_INSTALL\admin\orcl\dpdump/';


--
-- JAVA$JOX$CUJS$DIRECTORY$  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
JAVA$JOX$CUJS$DIRECTORY$ AS 
'C:\APP\ORA193X64DB_SOURCE\JAVAVM\ADMIN\';


--
-- OPATCH_INST_DIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
OPATCH_INST_DIR AS 
'C:\app\ORA193X64DB_SOURCE\OPatch';


--
-- OPATCH_LOG_DIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
OPATCH_LOG_DIR AS 
'C:\app\ORA193X64DB_SOURCE\rdbms\log';


--
-- OPATCH_SCRIPT_DIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
OPATCH_SCRIPT_DIR AS 
'C:\app\ORA193X64DB_SOURCE\QOpatch';


--
-- ORACLECLRDIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
ORACLECLRDIR AS 
'C:\app\ORA193X64DB_SOURCE\bin\clr';


--
-- ORACLE_BASE  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
ORACLE_BASE AS 
'C:\app\ORA193X64DB_INSTALL';


--
-- ORACLE_HOME  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
ORACLE_HOME AS 
'C:\app\ORA193X64DB_SOURCE';


--
-- ORACLE_OCM_CONFIG_DIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
ORACLE_OCM_CONFIG_DIR AS 
'C:\app\ORA193X64DB_SOURCE\ccr\state';


--
-- ORACLE_OCM_CONFIG_DIR2  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
ORACLE_OCM_CONFIG_DIR2 AS 
'C:\app\ORA193X64DB_SOURCE\ccr\state';


--
-- SDO_DIR_ADMIN  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
SDO_DIR_ADMIN AS 
'C:\app\ORA193X64DB_SOURCE/md/admin';


--
-- SDO_DIR_WORK  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
SDO_DIR_WORK AS 
'';


--
-- XMLDIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
XMLDIR AS 
'C:\app\ORA193X64DB_SOURCE\rdbms\xml';


--
-- XSDDIR  (Directory) 
--
CREATE OR REPLACE DIRECTORY 
XSDDIR AS 
'C:\app\ORA193X64DB_SOURCE\rdbms\xml\schema';


--
-- TEMP  (Tablespace) 
--
CREATE TEMPORARY TABLESPACE TEMP
TEMPFILE 
  'C:\APP\ORA193X64DB_INSTALL\ORADATA\ORCL\TEMP01.DBF' SIZE 20M AUTOEXTEND ON NEXT 640K MAXSIZE UNLIMITED
TABLESPACE GROUP ''
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M
FLASHBACK ON;


--
-- USERS  (Tablespace) 
--
CREATE TABLESPACE USERS
DATAFILE 
  'C:\APP\ORA193X64DB_INSTALL\ORADATA\ORCL\USERS01.DBF' SIZE 10M AUTOEXTEND ON NEXT 1280K MAXSIZE UNLIMITED
LOGGING
DEFAULT 
  NO INMEMORY
ONLINE
EXTENT MANAGEMENT LOCAL AUTOALLOCATE
BLOCKSIZE 8K
SEGMENT SPACE MANAGEMENT AUTO
FLASHBACK ON;


--
-- "DEFAULT"  (Profile) 
--
CREATE PROFILE "DEFAULT" LIMIT
  SESSIONS_PER_USER UNLIMITED
  CPU_PER_SESSION UNLIMITED
  CPU_PER_CALL UNLIMITED
  CONNECT_TIME UNLIMITED
  IDLE_TIME UNLIMITED
  LOGICAL_READS_PER_SESSION UNLIMITED
  LOGICAL_READS_PER_CALL UNLIMITED
  COMPOSITE_LIMIT UNLIMITED
  PRIVATE_SGA UNLIMITED
  FAILED_LOGIN_ATTEMPTS 10
  INACTIVE_ACCOUNT_TIME UNLIMITED
  PASSWORD_LIFE_TIME 180
  PASSWORD_REUSE_TIME UNLIMITED
  PASSWORD_REUSE_MAX UNLIMITED
  PASSWORD_LOCK_TIME 1
  PASSWORD_GRACE_TIME 7
  PASSWORD_VERIFY_FUNCTION NULL;


--
-- CONNECT  (Role) 
--
CREATE ROLE CONNECT NOT IDENTIFIED;

-- System privileges granted to CONNECT
GRANT CREATE SESSION TO CONNECT CONTAINER=ALL;
GRANT SET CONTAINER TO CONNECT CONTAINER=ALL;


--
-- DBA  (Role) 
--
CREATE ROLE DBA NOT IDENTIFIED;

-- Object privileges granted to DBA
GRANT EXECUTE ON ORDSYS.CARTRIDGE TO DBA;
GRANT EXECUTE ON SYS.ADR_HOME_T TO DBA;
GRANT EXECUTE ON SYS.ADR_INCIDENT_CORR_KEYS_T TO DBA;
GRANT EXECUTE ON SYS.ADR_INCIDENT_FILES_T TO DBA;
GRANT EXECUTE ON SYS.ADR_INCIDENT_INFO_T TO DBA;
GRANT EXECUTE ON SYS.ADR_INCIDENT_T TO DBA;
GRANT EXECUTE ON SYS.ADR_LOG_MSG_ARGS_T TO DBA;
GRANT EXECUTE ON SYS.ADR_LOG_MSG_ARG_T TO DBA;
GRANT EXECUTE ON SYS.ADR_LOG_MSG_ECID_T TO DBA;
GRANT EXECUTE ON SYS.ADR_LOG_MSG_ERRID_T TO DBA;
GRANT EXECUTE ON SYS.ADR_LOG_MSG_SUPPL_ATTRS_T TO DBA;
GRANT EXECUTE ON SYS.ADR_LOG_MSG_SUPPL_ATTR_T TO DBA;
GRANT EXECUTE ON SYS.ADR_LOG_MSG_T TO DBA;
GRANT EXECUTE ON SYS.AS_REPLAY TO DBA;
GRANT SELECT ON SYS.CDB_XS_ACTIVE_SESSIONS TO DBA;
GRANT SELECT ON SYS.CDB_XS_SESSIONS TO DBA;
GRANT SELECT ON SYS.CDB_XS_SESSION_NS_ATTRIBUTES TO DBA;
GRANT SELECT ON SYS.CDB_XS_SESSION_ROLES TO DBA;
GRANT DELETE ON SYS.DBA_REGISTRY_SQLPATCH TO DBA;
GRANT INSERT ON SYS.DBA_REGISTRY_SQLPATCH TO DBA;
GRANT SELECT ON SYS.DBA_REGISTRY_SQLPATCH TO DBA;
GRANT UPDATE ON SYS.DBA_REGISTRY_SQLPATCH TO DBA;
GRANT DELETE ON SYS.DBA_REGISTRY_SQLPATCH_RU_INFO TO DBA;
GRANT INSERT ON SYS.DBA_REGISTRY_SQLPATCH_RU_INFO TO DBA;
GRANT SELECT ON SYS.DBA_REGISTRY_SQLPATCH_RU_INFO TO DBA;
GRANT UPDATE ON SYS.DBA_REGISTRY_SQLPATCH_RU_INFO TO DBA;
GRANT SELECT ON SYS.DBA_XS_ACTIVE_SESSIONS TO DBA;
GRANT SELECT ON SYS.DBA_XS_SESSIONS TO DBA;
GRANT SELECT ON SYS.DBA_XS_SESSION_NS_ATTRIBUTES TO DBA;
GRANT SELECT ON SYS.DBA_XS_SESSION_ROLES TO DBA;
GRANT EXECUTE ON SYS.DBMS_ADR TO DBA;
GRANT EXECUTE ON SYS.DBMS_ADR_APP TO DBA;
GRANT EXECUTE ON SYS.DBMS_APP_CONT TO DBA;
GRANT EXECUTE ON SYS.DBMS_APP_CONT_ADMIN TO DBA;
GRANT EXECUTE ON SYS.DBMS_AUTO_INDEX TO DBA;
GRANT EXECUTE ON SYS.DBMS_AUTO_SQLTUNE TO DBA;
GRANT EXECUTE ON SYS.DBMS_AUTO_TASK_ADMIN TO DBA;
GRANT EXECUTE ON SYS.DBMS_AUTO_TASK_IMMEDIATE TO DBA;
GRANT EXECUTE ON SYS.DBMS_AWR_WAREHOUSE_SERVER TO DBA;
GRANT EXECUTE ON SYS.DBMS_AWR_WAREHOUSE_SOURCE TO DBA;
GRANT EXECUTE ON SYS.DBMS_CACHEUTIL TO DBA;
GRANT EXECUTE ON SYS.DBMS_DNFS TO DBA;
GRANT EXECUTE ON SYS.DBMS_FEATURE_USAGE_REPORT TO DBA;
GRANT EXECUTE ON SYS.DBMS_FLASHBACK TO DBA;
GRANT EXECUTE ON SYS.DBMS_FLASHBACK_ARCHIVE TO DBA;
GRANT EXECUTE ON SYS.DBMS_FS TO DBA;
GRANT EXECUTE ON SYS.DBMS_GSM_FIX TO DBA;
GRANT EXECUTE ON SYS.DBMS_HANG_MANAGER TO DBA;
GRANT EXECUTE ON SYS.DBMS_HM TO DBA;
GRANT EXECUTE ON SYS.DBMS_ILM_ADMIN TO DBA;
GRANT EXECUTE ON SYS.DBMS_INMEMORY_ADMIN TO DBA;
GRANT EXECUTE ON SYS.DBMS_IR TO DBA;
GRANT EXECUTE ON SYS.DBMS_LOGSTDBY TO DBA;
GRANT EXECUTE ON SYS.DBMS_MANAGEMENT_BOOTSTRAP TO DBA;
GRANT EXECUTE ON SYS.DBMS_MEMOPTIMIZE_ADMIN TO DBA;
GRANT EXECUTE ON SYS.DBMS_MONITOR TO DBA;
GRANT EXECUTE ON SYS.DBMS_NETWORK_ACL_ADMIN TO DBA;
GRANT EXECUTE ON SYS.DBMS_PERF TO DBA;
GRANT EXECUTE ON SYS.DBMS_RAT_MASK TO DBA;
GRANT EXECUTE ON SYS.DBMS_RESULT_CACHE TO DBA;
GRANT EXECUTE ON SYS.DBMS_RESUMABLE TO DBA;
GRANT EXECUTE ON SYS.DBMS_ROLLING TO DBA;
GRANT EXECUTE ON SYS.DBMS_SERVER_ALERT TO DBA;
GRANT EXECUTE ON SYS.DBMS_SERVER_TRACE TO DBA;
GRANT EXECUTE ON SYS.DBMS_SERVICE TO DBA;
GRANT EXECUTE ON SYS.DBMS_SERVICE_CONST TO DBA;
GRANT EXECUTE ON SYS.DBMS_SERVICE_ERR TO DBA;
GRANT EXECUTE ON SYS.DBMS_SERVICE_PRVT TO DBA;
GRANT EXECUTE ON SYS.DBMS_STORAGE_MAP TO DBA;
GRANT EXECUTE ON SYS.DBMS_TDB TO DBA;
GRANT EXECUTE ON SYS.DBMS_TNS TO DBA;
GRANT EXECUTE ON SYS.DBMS_UADV_ARR TO DBA;
GRANT EXECUTE ON SYS.DBMS_UMF TO DBA;
GRANT EXECUTE ON SYS.DBMS_UNDO_ADV TO DBA;
GRANT EXECUTE ON SYS.DBMS_WORKLOAD_CAPTURE TO DBA;
GRANT EXECUTE ON SYS.DBMS_WORKLOAD_REPLAY TO DBA;
GRANT EXECUTE ON SYS.DBMS_WORKLOAD_REPOSITORY TO DBA;
GRANT EXECUTE ON SYS.DBMS_WRR_STATE TO DBA;
GRANT EXECUTE ON SYS.DBMS_XS_PRINCIPALS TO DBA;
GRANT EXECUTE ON SYS.GRANT_RDF_OWNER_DR_PRIVS TO DBA;
GRANT EXECUTE ON SYS.HM_SQLTK_INTERNAL TO DBA;
GRANT EXECUTE ON SYS.LOAD_UNDO_STAT TO DBA;
GRANT DELETE ON SYS.MAP_OBJECT TO DBA;
GRANT INSERT ON SYS.MAP_OBJECT TO DBA;
GRANT SELECT ON SYS.MAP_OBJECT TO DBA;
GRANT UPDATE ON SYS.MAP_OBJECT TO DBA;
GRANT EXECUTE ON SYS.OJDS_CONTEXT TO DBA;
GRANT EXECUTE ON SYS.ORD_ADMIN TO DBA;
GRANT EXECUTE ON SYS.OUTLN_PKG TO DBA;
GRANT EXECUTE ON SYS.RDF_NETWORK_CREATOR_PRIVS TO DBA;
GRANT EXECUTE ON SYS.RESET_UNDO_STAT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_ADR_CONTROL TO DBA;
GRANT SELECT ON SYS.V_$DIAG_ADR_CONTROL_AUX TO DBA;
GRANT SELECT ON SYS.V_$DIAG_ADR_INVALIDATION TO DBA;
GRANT SELECT ON SYS.V_$DIAG_ALERT_EXT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_AMS_XACTION TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DDE_USER_ACTION TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DDE_USER_ACTION_DEF TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DDE_USR_ACT_PARAM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DDE_USR_ACT_PARAM_DEF TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DDE_USR_INC_ACT_MAP TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DDE_USR_INC_TYPE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DFW_CONFIG_CAPTURE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DFW_CONFIG_ITEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DFW_PATCH_CAPTURE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DFW_PATCH_ITEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DFW_PURGE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DFW_PURGE_ITEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DIAGV_INCIDENT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_DIR_EXT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_EM_DIAG_JOB TO DBA;
GRANT SELECT ON SYS.V_$DIAG_EM_TARGET_INFO TO DBA;
GRANT SELECT ON SYS.V_$DIAG_EM_USER_ACTIVITY TO DBA;
GRANT SELECT ON SYS.V_$DIAG_HM_FDG_SET TO DBA;
GRANT SELECT ON SYS.V_$DIAG_HM_FINDING TO DBA;
GRANT SELECT ON SYS.V_$DIAG_HM_INFO TO DBA;
GRANT SELECT ON SYS.V_$DIAG_HM_MESSAGE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_HM_RECOMMENDATION TO DBA;
GRANT SELECT ON SYS.V_$DIAG_HM_RUN TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INCCKEY TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INCIDENT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INCIDENT_FILE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INC_METER_CONFIG TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INC_METER_IMPT_DEF TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INC_METER_INFO TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INC_METER_PK_IMPTS TO DBA;
GRANT SELECT ON SYS.V_$DIAG_INC_METER_SUMMARY TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_CONFIGURATION TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_FILE_COPY_LOG TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_FILE_METADATA TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_PACKAGE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_PACKAGE_FILE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_PACKAGE_HISTORY TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_PACKAGE_INCIDENT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_PKG_UNPACK_HIST TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_PROGRESS_LOG TO DBA;
GRANT SELECT ON SYS.V_$DIAG_IPS_REMOTE_PACKAGE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_LOG_EXT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_PDB_PROBLEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_PDB_SPACE_MGMT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_PICKLEERR TO DBA;
GRANT SELECT ON SYS.V_$DIAG_PROBLEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_RELMD_EXT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_SWEEPERR TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VADR_CONTROL TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VEM_USER_ACTLOG TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VEM_USER_ACTLOG1 TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VHM_RUN TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIEW TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIEWCOL TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VINCIDENT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VINCIDENT_FILE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VINC_METER_INFO TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_FILE_COPY_LOG TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_FILE_METADATA TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PACKAGE_FILE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PACKAGE_HISTORY TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PACKAGE_MAIN_INT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PACKAGE_SIZE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PKG_FILE TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PKG_INC_CAND TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PKG_INC_DTL TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PKG_INC_DTL1 TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VIPS_PKG_MAIN_PROBLEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VNOT_EXIST_INCIDENT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPDB_PROBLEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM1 TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM2 TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM_BUCKET TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM_BUCKET1 TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM_BUCKET_COUNT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM_INT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VPROBLEM_LASTINC TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VSHOWCATVIEW TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VSHOWINCB TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VSHOWINCB_I TO DBA;
GRANT SELECT ON SYS.V_$DIAG_VTEST_EXISTS TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_ACTINC TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_ACTPROB TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_INCCOUNT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_INCFCOUNT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_INC_METER_INFO_PROB TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_IPSPRBCNT TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_IPSPRBCNT1 TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_NFCINC TO DBA;
GRANT SELECT ON SYS.V_$DIAG_V_SWPERRCOUNT TO DBA;
GRANT INSERT ON SYS.XSDB$SCHEMA_ACL TO DBA;
GRANT SELECT ON SYS.XSDB$SCHEMA_ACL TO DBA;
GRANT UPDATE ON SYS.XSDB$SCHEMA_ACL TO DBA;
GRANT EXECUTE ON SYS.XS_MTCACHE_INT TO DBA;
GRANT EXECUTE ON XDB.DBMS_CSX_ADMIN TO DBA;
GRANT EXECUTE ON XDB.DBMS_XDBT TO DBA;
GRANT EXECUTE ON XDB.DBMS_XDB_ADMIN TO DBA;
GRANT DELETE ON XDB.X$PT5M93HIFLVR86I8UJ70SMAT5O1E TO DBA;
GRANT INSERT ON XDB.X$PT5M93HIFLVR86I8UJ70SMAT5O1E TO DBA;
GRANT SELECT ON XDB.X$PT5M93HIFLVR86I8UJ70SMAT5O1E TO DBA;
GRANT UPDATE ON XDB.X$PT5M93HIFLVR86I8UJ70SMAT5O1E TO DBA;
GRANT DELETE ON XDB.XDB$ACL TO DBA;
GRANT INSERT ON XDB.XDB$ACL TO DBA;
GRANT SELECT ON XDB.XDB$ACL TO DBA;
GRANT UPDATE ON XDB.XDB$ACL TO DBA;
GRANT DELETE ON XDB.XDB$CHECKOUTS TO DBA;
GRANT INSERT ON XDB.XDB$CHECKOUTS TO DBA;
GRANT SELECT ON XDB.XDB$CHECKOUTS TO DBA;
GRANT UPDATE ON XDB.XDB$CHECKOUTS TO DBA;
GRANT DELETE ON XDB.XDB$CONFIG TO DBA;
GRANT INSERT ON XDB.XDB$CONFIG TO DBA;
GRANT SELECT ON XDB.XDB$CONFIG TO DBA;
GRANT UPDATE ON XDB.XDB$CONFIG TO DBA;
GRANT DELETE ON XDB.XDB$D_LINK TO DBA;
GRANT INSERT ON XDB.XDB$D_LINK TO DBA;
GRANT SELECT ON XDB.XDB$D_LINK TO DBA;
GRANT UPDATE ON XDB.XDB$D_LINK TO DBA;
GRANT DELETE ON XDB.XDB$H_INDEX TO DBA;
GRANT INSERT ON XDB.XDB$H_INDEX TO DBA;
GRANT SELECT ON XDB.XDB$H_INDEX TO DBA;
GRANT UPDATE ON XDB.XDB$H_INDEX TO DBA;
GRANT DELETE ON XDB.XDB$H_LINK TO DBA;
GRANT INSERT ON XDB.XDB$H_LINK TO DBA;
GRANT SELECT ON XDB.XDB$H_LINK TO DBA;
GRANT UPDATE ON XDB.XDB$H_LINK TO DBA;
GRANT DELETE ON XDB.XDB$NLOCKS TO DBA;
GRANT INSERT ON XDB.XDB$NLOCKS TO DBA;
GRANT SELECT ON XDB.XDB$NLOCKS TO DBA;
GRANT UPDATE ON XDB.XDB$NLOCKS TO DBA;
GRANT DELETE ON XDB.XDB$RESCONFIG TO DBA;
GRANT INSERT ON XDB.XDB$RESCONFIG TO DBA;
GRANT SELECT ON XDB.XDB$RESCONFIG TO DBA;
GRANT UPDATE ON XDB.XDB$RESCONFIG TO DBA;
GRANT DELETE ON XDB.XDB$RESOURCE TO DBA;
GRANT INSERT ON XDB.XDB$RESOURCE TO DBA;
GRANT SELECT ON XDB.XDB$RESOURCE TO DBA;
GRANT UPDATE ON XDB.XDB$RESOURCE TO DBA;

-- System privileges granted to DBA
GRANT ADMINISTER ANY SQL TUNING SET TO DBA CONTAINER=ALL;
GRANT ADMINISTER DATABASE TRIGGER TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RESOURCE_MANAGER_PRIVS.GRANT_SYSTEM_PRIVILEGE
  (GRANTEE_NAME   => 'DBA', 
   PRIVILEGE_NAME => 'ADMINISTER_RESOURCE_MANAGER',
   ADMIN_OPTION   => FALSE);
END;
/
GRANT ADMINISTER SQL MANAGEMENT OBJECT TO DBA CONTAINER=ALL;
GRANT ADMINISTER SQL TUNING SET TO DBA CONTAINER=ALL;
GRANT ADVISOR TO DBA CONTAINER=ALL;
GRANT ALTER ANY ANALYTIC VIEW TO DBA CONTAINER=ALL;
GRANT ALTER ANY ASSEMBLY TO DBA CONTAINER=ALL;
GRANT ALTER ANY ATTRIBUTE DIMENSION TO DBA CONTAINER=ALL;
GRANT ALTER ANY CLUSTER TO DBA CONTAINER=ALL;
GRANT ALTER ANY CUBE TO DBA CONTAINER=ALL;
GRANT ALTER ANY CUBE BUILD PROCESS TO DBA CONTAINER=ALL;
GRANT ALTER ANY CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT ALTER ANY DIMENSION TO DBA CONTAINER=ALL;
GRANT ALTER ANY EDITION TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.ALTER_ANY_EVALUATION_CONTEXT,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT ALTER ANY HIERARCHY TO DBA CONTAINER=ALL;
GRANT ALTER ANY INDEX TO DBA CONTAINER=ALL;
GRANT ALTER ANY INDEXTYPE TO DBA CONTAINER=ALL;
GRANT ALTER ANY LIBRARY TO DBA CONTAINER=ALL;
GRANT ALTER ANY MATERIALIZED VIEW TO DBA CONTAINER=ALL;
GRANT ALTER ANY MEASURE FOLDER TO DBA CONTAINER=ALL;
GRANT ALTER ANY MINING MODEL TO DBA CONTAINER=ALL;
GRANT ALTER ANY OPERATOR TO DBA CONTAINER=ALL;
GRANT ALTER ANY OUTLINE TO DBA CONTAINER=ALL;
GRANT ALTER ANY PROCEDURE TO DBA CONTAINER=ALL;
GRANT ALTER ANY ROLE TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.ALTER_ANY_RULE,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.ALTER_ANY_RULE_SET,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT ALTER ANY SEQUENCE TO DBA CONTAINER=ALL;
GRANT ALTER ANY SQL PROFILE TO DBA CONTAINER=ALL;
GRANT ALTER ANY SQL TRANSLATION PROFILE TO DBA CONTAINER=ALL;
GRANT ALTER ANY TABLE TO DBA CONTAINER=ALL;
GRANT ALTER ANY TRIGGER TO DBA CONTAINER=ALL;
GRANT ALTER ANY TYPE TO DBA CONTAINER=ALL;
GRANT ALTER DATABASE TO DBA CONTAINER=ALL;
GRANT ALTER LOCKDOWN PROFILE TO DBA CONTAINER=ALL;
GRANT ALTER PROFILE TO DBA CONTAINER=ALL;
GRANT ALTER RESOURCE COST TO DBA CONTAINER=ALL;
GRANT ALTER ROLLBACK SEGMENT TO DBA CONTAINER=ALL;
GRANT ALTER SESSION TO DBA CONTAINER=ALL;
GRANT ALTER SYSTEM TO DBA CONTAINER=ALL;
GRANT ALTER TABLESPACE TO DBA CONTAINER=ALL;
GRANT ALTER USER TO DBA CONTAINER=ALL;
GRANT ANALYZE ANY TO DBA CONTAINER=ALL;
GRANT ANALYZE ANY DICTIONARY TO DBA CONTAINER=ALL;
GRANT AUDIT ANY TO DBA CONTAINER=ALL;
GRANT AUDIT SYSTEM TO DBA CONTAINER=ALL;
GRANT BACKUP ANY TABLE TO DBA CONTAINER=ALL;
GRANT BECOME USER TO DBA CONTAINER=ALL;
GRANT CHANGE NOTIFICATION TO DBA CONTAINER=ALL;
GRANT COMMENT ANY MINING MODEL TO DBA CONTAINER=ALL;
GRANT COMMENT ANY TABLE TO DBA CONTAINER=ALL;
GRANT CREATE ANALYTIC VIEW TO DBA CONTAINER=ALL;
GRANT CREATE ANY ANALYTIC VIEW TO DBA CONTAINER=ALL;
GRANT CREATE ANY ASSEMBLY TO DBA CONTAINER=ALL;
GRANT CREATE ANY ATTRIBUTE DIMENSION TO DBA CONTAINER=ALL;
GRANT CREATE ANY CLUSTER TO DBA CONTAINER=ALL;
GRANT CREATE ANY CONTEXT TO DBA CONTAINER=ALL;
GRANT CREATE ANY CREDENTIAL TO DBA CONTAINER=ALL;
GRANT CREATE ANY CUBE TO DBA CONTAINER=ALL;
GRANT CREATE ANY CUBE BUILD PROCESS TO DBA CONTAINER=ALL;
GRANT CREATE ANY CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT CREATE ANY DIMENSION TO DBA CONTAINER=ALL;
GRANT CREATE ANY DIRECTORY TO DBA CONTAINER=ALL;
GRANT CREATE ANY EDITION TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.CREATE_ANY_EVALUATION_CONTEXT,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT CREATE ANY HIERARCHY TO DBA CONTAINER=ALL;
GRANT CREATE ANY INDEX TO DBA CONTAINER=ALL;
GRANT CREATE ANY INDEXTYPE TO DBA CONTAINER=ALL;
GRANT CREATE ANY JOB TO DBA CONTAINER=ALL;
GRANT CREATE ANY LIBRARY TO DBA CONTAINER=ALL;
GRANT CREATE ANY MATERIALIZED VIEW TO DBA CONTAINER=ALL;
GRANT CREATE ANY MEASURE FOLDER TO DBA CONTAINER=ALL;
GRANT CREATE ANY MINING MODEL TO DBA CONTAINER=ALL;
GRANT CREATE ANY OPERATOR TO DBA CONTAINER=ALL;
GRANT CREATE ANY OUTLINE TO DBA CONTAINER=ALL;
GRANT CREATE ANY PROCEDURE TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.CREATE_ANY_RULE,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.CREATE_ANY_RULE_SET,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT CREATE ANY SEQUENCE TO DBA CONTAINER=ALL;
GRANT CREATE ANY SQL PROFILE TO DBA CONTAINER=ALL;
GRANT CREATE ANY SQL TRANSLATION PROFILE TO DBA CONTAINER=ALL;
GRANT CREATE ANY SYNONYM TO DBA CONTAINER=ALL;
GRANT CREATE ANY TABLE TO DBA CONTAINER=ALL;
GRANT CREATE ANY TRIGGER TO DBA CONTAINER=ALL;
GRANT CREATE ANY TYPE TO DBA CONTAINER=ALL;
GRANT CREATE ANY VIEW TO DBA CONTAINER=ALL;
GRANT CREATE ASSEMBLY TO DBA CONTAINER=ALL;
GRANT CREATE ATTRIBUTE DIMENSION TO DBA CONTAINER=ALL;
GRANT CREATE CLUSTER TO DBA CONTAINER=ALL;
GRANT CREATE CREDENTIAL TO DBA CONTAINER=ALL;
GRANT CREATE CUBE TO DBA CONTAINER=ALL;
GRANT CREATE CUBE BUILD PROCESS TO DBA CONTAINER=ALL;
GRANT CREATE CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT CREATE DATABASE LINK TO DBA CONTAINER=ALL;
GRANT CREATE DIMENSION TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.CREATE_EVALUATION_CONTEXT_OBJ,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT CREATE EXTERNAL JOB TO DBA CONTAINER=ALL;
GRANT CREATE HIERARCHY TO DBA CONTAINER=ALL;
GRANT CREATE INDEXTYPE TO DBA CONTAINER=ALL;
GRANT CREATE JOB TO DBA CONTAINER=ALL;
GRANT CREATE LIBRARY TO DBA CONTAINER=ALL;
GRANT CREATE LOCKDOWN PROFILE TO DBA CONTAINER=ALL;
GRANT CREATE MATERIALIZED VIEW TO DBA CONTAINER=ALL;
GRANT CREATE MEASURE FOLDER TO DBA CONTAINER=ALL;
GRANT CREATE MINING MODEL TO DBA CONTAINER=ALL;
GRANT CREATE OPERATOR TO DBA CONTAINER=ALL;
GRANT CREATE PLUGGABLE DATABASE TO DBA CONTAINER=ALL;
GRANT CREATE PROCEDURE TO DBA CONTAINER=ALL;
GRANT CREATE PROFILE TO DBA CONTAINER=ALL;
GRANT CREATE PUBLIC DATABASE LINK TO DBA CONTAINER=ALL;
GRANT CREATE PUBLIC SYNONYM TO DBA CONTAINER=ALL;
GRANT CREATE ROLE TO DBA CONTAINER=ALL;
GRANT CREATE ROLLBACK SEGMENT TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.CREATE_RULE_OBJ,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.CREATE_RULE_SET_OBJ,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT CREATE SEQUENCE TO DBA CONTAINER=ALL;
GRANT CREATE SESSION TO DBA CONTAINER=ALL;
GRANT CREATE SQL TRANSLATION PROFILE TO DBA CONTAINER=ALL;
GRANT CREATE SYNONYM TO DBA CONTAINER=ALL;
GRANT CREATE TABLE TO DBA CONTAINER=ALL;
GRANT CREATE TABLESPACE TO DBA CONTAINER=ALL;
GRANT CREATE TRIGGER TO DBA CONTAINER=ALL;
GRANT CREATE TYPE TO DBA CONTAINER=ALL;
GRANT CREATE USER TO DBA CONTAINER=ALL;
GRANT CREATE VIEW TO DBA CONTAINER=ALL;
GRANT DEBUG ANY PROCEDURE TO DBA CONTAINER=ALL;
GRANT DEBUG CONNECT SESSION TO DBA CONTAINER=ALL;
GRANT DELETE ANY CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT DELETE ANY MEASURE FOLDER TO DBA CONTAINER=ALL;
GRANT DELETE ANY TABLE TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE (
  PRIVILEGE    => 'DEQUEUE_ANY',
  GRANTEE      => 'DBA',
  ADMIN_OPTION => FALSE);
END;
/
GRANT DROP ANY ANALYTIC VIEW TO DBA CONTAINER=ALL;
GRANT DROP ANY ASSEMBLY TO DBA CONTAINER=ALL;
GRANT DROP ANY ATTRIBUTE DIMENSION TO DBA CONTAINER=ALL;
GRANT DROP ANY CLUSTER TO DBA CONTAINER=ALL;
GRANT DROP ANY CONTEXT TO DBA CONTAINER=ALL;
GRANT DROP ANY CUBE TO DBA CONTAINER=ALL;
GRANT DROP ANY CUBE BUILD PROCESS TO DBA CONTAINER=ALL;
GRANT DROP ANY CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT DROP ANY DIMENSION TO DBA CONTAINER=ALL;
GRANT DROP ANY DIRECTORY TO DBA CONTAINER=ALL;
GRANT DROP ANY EDITION TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.DROP_ANY_EVALUATION_CONTEXT,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT DROP ANY HIERARCHY TO DBA CONTAINER=ALL;
GRANT DROP ANY INDEX TO DBA CONTAINER=ALL;
GRANT DROP ANY INDEXTYPE TO DBA CONTAINER=ALL;
GRANT DROP ANY LIBRARY TO DBA CONTAINER=ALL;
GRANT DROP ANY MATERIALIZED VIEW TO DBA CONTAINER=ALL;
GRANT DROP ANY MEASURE FOLDER TO DBA CONTAINER=ALL;
GRANT DROP ANY MINING MODEL TO DBA CONTAINER=ALL;
GRANT DROP ANY OPERATOR TO DBA CONTAINER=ALL;
GRANT DROP ANY OUTLINE TO DBA CONTAINER=ALL;
GRANT DROP ANY PROCEDURE TO DBA CONTAINER=ALL;
GRANT DROP ANY ROLE TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.DROP_ANY_RULE,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.DROP_ANY_RULE_SET,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT DROP ANY SEQUENCE TO DBA CONTAINER=ALL;
GRANT DROP ANY SQL PROFILE TO DBA CONTAINER=ALL;
GRANT DROP ANY SQL TRANSLATION PROFILE TO DBA CONTAINER=ALL;
GRANT DROP ANY SYNONYM TO DBA CONTAINER=ALL;
GRANT DROP ANY TABLE TO DBA CONTAINER=ALL;
GRANT DROP ANY TRIGGER TO DBA CONTAINER=ALL;
GRANT DROP ANY TYPE TO DBA CONTAINER=ALL;
GRANT DROP ANY VIEW TO DBA CONTAINER=ALL;
GRANT DROP LOCKDOWN PROFILE TO DBA CONTAINER=ALL;
GRANT DROP PROFILE TO DBA CONTAINER=ALL;
GRANT DROP PUBLIC DATABASE LINK TO DBA CONTAINER=ALL;
GRANT DROP PUBLIC SYNONYM TO DBA CONTAINER=ALL;
GRANT DROP ROLLBACK SEGMENT TO DBA CONTAINER=ALL;
GRANT DROP TABLESPACE TO DBA CONTAINER=ALL;
GRANT DROP USER TO DBA CONTAINER=ALL;
GRANT EM EXPRESS CONNECT TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE (
  PRIVILEGE    => 'ENQUEUE_ANY',
  GRANTEE      => 'DBA',
  ADMIN_OPTION => FALSE);
END;
/
GRANT EXECUTE ANY ASSEMBLY TO DBA CONTAINER=ALL;
GRANT EXECUTE ANY CLASS TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.EXECUTE_ANY_EVALUATION_CONTEXT,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT EXECUTE ANY INDEXTYPE TO DBA CONTAINER=ALL;
GRANT EXECUTE ANY LIBRARY TO DBA CONTAINER=ALL;
GRANT EXECUTE ANY OPERATOR TO DBA CONTAINER=ALL;
GRANT EXECUTE ANY PROCEDURE TO DBA CONTAINER=ALL;
GRANT EXECUTE ANY PROGRAM TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.EXECUTE_ANY_RULE,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
BEGIN
SYS.DBMS_RULE_ADM.GRANT_SYSTEM_PRIVILEGE(
  PRIVILEGE    => SYS.DBMS_RULE_ADM.EXECUTE_ANY_RULE_SET,
  GRANTEE      => 'DBA',
  GRANT_OPTION => FALSE);
END;
/
GRANT EXECUTE ANY TYPE TO DBA CONTAINER=ALL;
GRANT EXECUTE ASSEMBLY TO DBA CONTAINER=ALL;
GRANT EXPORT FULL DATABASE TO DBA CONTAINER=ALL;
GRANT FLASHBACK ANY TABLE TO DBA CONTAINER=ALL;
GRANT FLASHBACK ARCHIVE ADMINISTER TO DBA CONTAINER=ALL;
GRANT FORCE ANY TRANSACTION TO DBA CONTAINER=ALL;
GRANT FORCE TRANSACTION TO DBA CONTAINER=ALL;
GRANT GLOBAL QUERY REWRITE TO DBA CONTAINER=ALL;
GRANT GRANT ANY OBJECT PRIVILEGE TO DBA CONTAINER=ALL;
GRANT GRANT ANY PRIVILEGE TO DBA CONTAINER=ALL;
GRANT GRANT ANY ROLE TO DBA CONTAINER=ALL;
GRANT IMPORT FULL DATABASE TO DBA CONTAINER=ALL;
GRANT INSERT ANY CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT INSERT ANY MEASURE FOLDER TO DBA CONTAINER=ALL;
GRANT INSERT ANY TABLE TO DBA CONTAINER=ALL;
GRANT LOCK ANY TABLE TO DBA CONTAINER=ALL;
GRANT LOGMINING TO DBA CONTAINER=ALL;
GRANT MANAGE ANY FILE GROUP TO DBA CONTAINER=ALL;
BEGIN
SYS.DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE (
  PRIVILEGE    => 'MANAGE_ANY',
  GRANTEE      => 'DBA',
  ADMIN_OPTION => FALSE);
END;
/
GRANT MANAGE FILE GROUP TO DBA CONTAINER=ALL;
GRANT MANAGE SCHEDULER TO DBA CONTAINER=ALL;
GRANT MANAGE TABLESPACE TO DBA CONTAINER=ALL;
GRANT MERGE ANY VIEW TO DBA CONTAINER=ALL;
GRANT ON COMMIT REFRESH TO DBA CONTAINER=ALL;
GRANT QUERY REWRITE TO DBA CONTAINER=ALL;
GRANT READ ANY FILE GROUP TO DBA CONTAINER=ALL;
GRANT READ ANY TABLE TO DBA CONTAINER=ALL;
GRANT REDEFINE ANY TABLE TO DBA CONTAINER=ALL;
GRANT RESTRICTED SESSION TO DBA CONTAINER=ALL;
GRANT RESUMABLE TO DBA CONTAINER=ALL;
GRANT SELECT ANY CUBE TO DBA CONTAINER=ALL;
GRANT SELECT ANY CUBE BUILD PROCESS TO DBA CONTAINER=ALL;
GRANT SELECT ANY CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT SELECT ANY DICTIONARY TO DBA CONTAINER=ALL;
GRANT SELECT ANY MEASURE FOLDER TO DBA CONTAINER=ALL;
GRANT SELECT ANY MINING MODEL TO DBA CONTAINER=ALL;
GRANT SELECT ANY SEQUENCE TO DBA CONTAINER=ALL;
GRANT SELECT ANY TABLE TO DBA CONTAINER=ALL;
GRANT SELECT ANY TRANSACTION TO DBA CONTAINER=ALL;
GRANT SET CONTAINER TO DBA CONTAINER=ALL;
GRANT UNDER ANY TABLE TO DBA CONTAINER=ALL;
GRANT UNDER ANY TYPE TO DBA CONTAINER=ALL;
GRANT UNDER ANY VIEW TO DBA CONTAINER=ALL;
GRANT UPDATE ANY CUBE TO DBA CONTAINER=ALL;
GRANT UPDATE ANY CUBE BUILD PROCESS TO DBA CONTAINER=ALL;
GRANT UPDATE ANY CUBE DIMENSION TO DBA CONTAINER=ALL;
GRANT UPDATE ANY TABLE TO DBA CONTAINER=ALL;
GRANT USE ANY JOB RESOURCE TO DBA CONTAINER=ALL;
GRANT USE ANY SQL TRANSLATION PROFILE TO DBA CONTAINER=ALL;

-- Roles granted to DBA
--
-- CAPTURE_ADMIN  (Role) 
--
GRANT CAPTURE_ADMIN TO DBA CONTAINER=ALL;
--
-- DATAPUMP_EXP_FULL_DATABASE  (Role) 
--
GRANT DATAPUMP_EXP_FULL_DATABASE TO DBA CONTAINER=ALL;
--
-- DATAPUMP_IMP_FULL_DATABASE  (Role) 
--
GRANT DATAPUMP_IMP_FULL_DATABASE TO DBA CONTAINER=ALL;
--
-- EM_EXPRESS_ALL  (Role) 
--
GRANT EM_EXPRESS_ALL TO DBA CONTAINER=ALL;
--
-- EXECUTE_CATALOG_ROLE  (Role) 
--
GRANT EXECUTE_CATALOG_ROLE TO DBA CONTAINER=ALL;
--
-- EXP_FULL_DATABASE  (Role) 
--
GRANT EXP_FULL_DATABASE TO DBA CONTAINER=ALL;
--
-- GATHER_SYSTEM_STATISTICS  (Role) 
--
GRANT GATHER_SYSTEM_STATISTICS TO DBA CONTAINER=ALL;
--
-- IMP_FULL_DATABASE  (Role) 
--
GRANT IMP_FULL_DATABASE TO DBA CONTAINER=ALL;
--
-- JAVA_ADMIN  (Role) 
--
GRANT JAVA_ADMIN TO DBA CONTAINER=ALL;
--
-- OLAP_DBA  (Role) 
--
GRANT OLAP_DBA TO DBA CONTAINER=ALL;
--
-- OLAP_XS_ADMIN  (Role) 
--
GRANT OLAP_XS_ADMIN TO DBA CONTAINER=ALL;
--
-- OPTIMIZER_PROCESSING_RATE  (Role) 
--
GRANT OPTIMIZER_PROCESSING_RATE TO DBA CONTAINER=ALL;
--
-- SCHEDULER_ADMIN  (Role) 
--
GRANT SCHEDULER_ADMIN TO DBA CONTAINER=ALL;
--
-- SELECT_CATALOG_ROLE  (Role) 
--
GRANT SELECT_CATALOG_ROLE TO DBA CONTAINER=ALL;
--
-- WM_ADMIN_ROLE  (Role) 
--
GRANT WM_ADMIN_ROLE TO DBA CONTAINER=ALL;
--
-- XDBADMIN  (Role) 
--
GRANT XDBADMIN TO DBA CONTAINER=ALL;
--
-- XDB_SET_INVOKER  (Role) 
--
GRANT XDB_SET_INVOKER TO DBA CONTAINER=ALL;


--
-- ADMIN  (User) 
--
CREATE USER ADMIN
  IDENTIFIED BY <password>
  HTTP DIGEST DISABLE
  DEFAULT TABLESPACE USERS
  TEMPORARY TABLESPACE TEMP
  PROFILE DEFAULT
  ACCOUNT UNLOCK;

-- 2 Roles for ADMIN 
--
-- CONNECT  (Role) 
--
GRANT CONNECT TO ADMIN WITH ADMIN OPTION;
--
-- DBA  (Role) 
--
GRANT DBA TO ADMIN WITH ADMIN OPTION;
ALTER USER ADMIN DEFAULT ROLE DBA;

-- 1 System Privilege for ADMIN 
GRANT UNLIMITED TABLESPACE TO ADMIN WITH ADMIN OPTION;


--
-- CALENDAR_UNAVAILABILITY_SEQ  (Sequence) 
--
CREATE SEQUENCE ADMIN.CALENDAR_UNAVAILABILITY_SEQ
  START WITH 13
  MAXVALUE 9999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  NOCACHE
  NOORDER
  NOKEEP
  NOSCALE
  GLOBAL;


--
-- AGENT_LEVELS  (Table) 
--
--   Row Count: 4
CREATE TABLE ADMIN.AGENT_LEVELS
(
  LEVEL_ID     NUMBER,
  LEVEL_NAME   VARCHAR2(50 BYTE),
  DESCRIPTION  VARCHAR2(255 BYTE)
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.AGENT_LEVELS ADD (
  PRIMARY KEY
  (LEVEL_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- CALENDAR_UNAVAILABILITY  (Table) 
--
--   Row Count: 3
CREATE TABLE ADMIN.CALENDAR_UNAVAILABILITY
(
  ID                NUMBER,
  USER_ID           NUMBER,
  UNAVAILABLE_DATE  DATE                        NOT NULL,
  REASON_DESC       VARCHAR2(255 BYTE),
  CREATED_AT        TIMESTAMP(6)                DEFAULT CURRENT_TIMESTAMP
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.CALENDAR_UNAVAILABILITY ADD (
  PRIMARY KEY
  (ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- CATEGORIES  (Table) 
--
--   Row Count: 5
CREATE TABLE ADMIN.CATEGORIES
(
  CATEGORY_ID  NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 41 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  NAME         VARCHAR2(100 BYTE)               NOT NULL,
  DESCRIPTION  VARCHAR2(255 BYTE)
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.CATEGORIES ADD (
  PRIMARY KEY
  (CATEGORY_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- KNOWLEDGE_BASE  (Table) 
--
--   Row Count: 6
CREATE TABLE ADMIN.KNOWLEDGE_BASE
(
  ARTICLE_ID     NUMBER GENERATED ALWAYS AS IDENTITY ( START WITH 21 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  TITLE          VARCHAR2(200 BYTE),
  CATEGORY       VARCHAR2(100 BYTE),
  PROBLEM_DESC   CLOB,
  SOLUTION_DESC  CLOB,
  CREATED_AT     DATE                           DEFAULT SYSDATE,
  CREATED_BY     NUMBER,
  TAGS           VARCHAR2(200 BYTE)
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.KNOWLEDGE_BASE ADD (
  PRIMARY KEY
  (ARTICLE_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- ROLES  (Table) 
--
--   Row Count: 3
CREATE TABLE ADMIN.ROLES
(
  ROLE_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 21 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  ROLE_NAME  VARCHAR2(50 BYTE)                  NOT NULL
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.ROLES ADD (
  PRIMARY KEY
  (ROLE_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);

ALTER TABLE ADMIN.ROLES ADD (
  UNIQUE (ROLE_NAME)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- SLA_LEVELS  (Table) 
--
--   Row Count: 4
CREATE TABLE ADMIN.SLA_LEVELS
(
  SLA_LEVEL_ID           NUMBER,
  NAME                   VARCHAR2(50 BYTE)      NOT NULL,
  DESCRIPTION            VARCHAR2(255 BYTE),
  RESPONSE_TIME_HOURS    NUMBER,
  RESOLUTION_TIME_HOURS  NUMBER
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.SLA_LEVELS ADD (
  PRIMARY KEY
  (SLA_LEVEL_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- SUBCATEGORIES  (Table) 
--
--  Dependencies: 
--   CATEGORIES (Table)
--
--   Row Count: 15
CREATE TABLE ADMIN.SUBCATEGORIES
(
  SUBCATEGORY_ID  NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 41 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  CATEGORY_ID     NUMBER                        NOT NULL,
  NAME            VARCHAR2(100 BYTE)            NOT NULL,
  DESCRIPTION     VARCHAR2(255 BYTE)
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.SUBCATEGORIES ADD (
  PRIMARY KEY
  (SUBCATEGORY_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- TICKET_COMMENTS  (Table) 
--
--   Row Count: 9
CREATE TABLE ADMIN.TICKET_COMMENTS
(
  COMMENT_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 141 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  TICKET_ID     NUMBER                          NOT NULL,
  COMMENTER_ID  NUMBER                          NOT NULL,
  COMMENT_TEXT  CLOB                            NOT NULL,
  COMMENTED_AT  DATE                            DEFAULT SYSDATE
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.TICKET_COMMENTS ADD (
  PRIMARY KEY
  (COMMENT_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- TICKET_PRIORITY  (Table) 
--
--   Row Count: 4
CREATE TABLE ADMIN.TICKET_PRIORITY
(
  PRIORITY_ID     NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 21 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  PRIORITY_LEVEL  VARCHAR2(50 BYTE)             NOT NULL
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.TICKET_PRIORITY ADD (
  PRIMARY KEY
  (PRIORITY_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKET_PRIORITY ADD (
  UNIQUE (PRIORITY_LEVEL)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- TICKET_STATUS  (Table) 
--
--   Row Count: 4
CREATE TABLE ADMIN.TICKET_STATUS
(
  STATUS_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 21 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  STATUS_NAME  VARCHAR2(50 BYTE)                NOT NULL
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.TICKET_STATUS ADD (
  PRIMARY KEY
  (STATUS_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKET_STATUS ADD (
  UNIQUE (STATUS_NAME)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- TRIGGER_METADATA  (Table) 
--
--   Row Count: 6
CREATE TABLE ADMIN.TRIGGER_METADATA
(
  TRIGGER_NAME  VARCHAR2(100 BYTE),
  DESCRIPTION   VARCHAR2(1000 BYTE)
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.TRIGGER_METADATA ADD (
  PRIMARY KEY
  (TRIGGER_NAME)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- USERS  (Table) 
--
--  Dependencies: 
--   ROLES (Table)
--
--   Row Count: 26
CREATE TABLE ADMIN.USERS
(
  USER_ID        NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 101 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  USERNAME       VARCHAR2(50 BYTE)              NOT NULL,
  PASSWORD_HASH  VARCHAR2(256 BYTE)             NOT NULL,
  EMAIL          VARCHAR2(100 BYTE)             NOT NULL,
  ROLE_ID        NUMBER,
  CREATED_AT     DATE                           DEFAULT SYSDATE
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.USERS ADD (
  PRIMARY KEY
  (USER_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);

ALTER TABLE ADMIN.USERS ADD (
  UNIQUE (USERNAME)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);

ALTER TABLE ADMIN.USERS ADD (
  UNIQUE (EMAIL)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- ADMINS_VIEW  (View) 
--
--  Dependencies: 
--   ROLES (Table)
--   USERS (Table)
--
CREATE OR REPLACE FORCE VIEW ADMIN.ADMINS_VIEW
(USER_ID, USERNAME, PASSWORD_HASH, EMAIL, ROLE_ID, 
 CREATED_AT)
BEQUEATH DEFINER
AS 
SELECT u."USER_ID",u."USERNAME",u."PASSWORD_HASH",u."EMAIL",u."ROLE_ID",u."CREATED_AT"
FROM users u
JOIN roles r ON u.role_id = r.role_id
WHERE r.role_name = 'Admin';


--
-- AGENTS_VIEW  (View) 
--
--  Dependencies: 
--   ROLES (Table)
--   USERS (Table)
--
CREATE OR REPLACE FORCE VIEW ADMIN.AGENTS_VIEW
(USER_ID, USERNAME, PASSWORD_HASH, EMAIL, ROLE_ID, 
 CREATED_AT)
BEQUEATH DEFINER
AS 
SELECT u."USER_ID",u."USERNAME",u."PASSWORD_HASH",u."EMAIL",u."ROLE_ID",u."CREATED_AT"
FROM users u
JOIN roles r ON u.role_id = r.role_id
WHERE r.role_name = 'Agent';


--
-- CUSTOMERS_VIEW  (View) 
--
--  Dependencies: 
--   ROLES (Table)
--   USERS (Table)
--
CREATE OR REPLACE FORCE VIEW ADMIN.CUSTOMERS_VIEW
(USER_ID, USERNAME, PASSWORD_HASH, EMAIL, ROLE_ID, 
 CREATED_AT)
BEQUEATH DEFINER
AS 
SELECT u."USER_ID",u."USERNAME",u."PASSWORD_HASH",u."EMAIL",u."ROLE_ID",u."CREATED_AT"
FROM users u
JOIN roles r ON u.role_id = r.role_id
WHERE r.role_name = 'Customer';


--
-- CALENDAR_UNAVAILABILITY_BEFORE_INS  (Trigger) 
--
--  Dependencies: 
--   CALENDAR_UNAVAILABILITY (Table)
--   CALENDAR_UNAVAILABILITY_SEQ (Sequence)
--   STANDARD (Package)
--
CREATE OR REPLACE TRIGGER ADMIN.calendar_unavailability_before_ins
BEFORE INSERT ON ADMIN.CALENDAR_UNAVAILABILITY
FOR EACH ROW
BEGIN
  :NEW.id := calendar_unavailability_seq.NEXTVAL;
END;
/


--
-- AGENT_ASSIGNMENT  (Table) 
--
--  Dependencies: 
--   AGENT_LEVELS (Table)
--   USERS (Table)
--
--   Row Count: 23
CREATE TABLE ADMIN.AGENT_ASSIGNMENT
(
  AGENT_ID     NUMBER,
  CATEGORY_ID  NUMBER,
  LEVEL_ID     NUMBER                           NOT NULL
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


--
-- TICKETS  (Table) 
--
--  Dependencies: 
--   SLA_LEVELS (Table)
--   TICKET_STATUS (Table)
--   TICKET_PRIORITY (Table)
--   SUBCATEGORIES (Table)
--
--   Row Count: 10
CREATE TABLE ADMIN.TICKETS
(
  TICKET_ID       NUMBER GENERATED BY DEFAULT AS IDENTITY ( START WITH 101 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  TITLE           VARCHAR2(255 BYTE)            NOT NULL,
  DESCRIPTION     CLOB,
  CREATED_BY      NUMBER                        NOT NULL,
  ASSIGNED_TO     NUMBER,
  CATEGORY_ID     NUMBER,
  STATUS_ID       NUMBER,
  PRIORITY_ID     NUMBER,
  CREATED_AT      DATE                          DEFAULT SYSDATE,
  UPDATED_AT      DATE,
  TIME_WORKED     VARCHAR2(8 BYTE)              DEFAULT '00:00:00',
  DUE_DATE        DATE,
  SLA_ID          NUMBER,
  RESPONSE_DUE    DATE,
  RESOLUTION_DUE  DATE,
  SUBCATEGORY_ID  NUMBER,
  ESCALATED       NUMBER(1)                     DEFAULT 0
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.TICKETS ADD (
  PRIMARY KEY
  (TICKET_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- TICKET_ATTACHMENTS  (Table) 
--
--  Dependencies: 
--   TICKET_COMMENTS (Table)
--   TICKETS (Table)
--
--   Row Count: 1
CREATE TABLE ADMIN.TICKET_ATTACHMENTS
(
  ATTACHMENT_ID  NUMBER GENERATED ALWAYS AS IDENTITY ( START WITH 21 MAXVALUE 9999999999999999999999999999 MINVALUE 1 NOCYCLE CACHE 20 NOORDER NOKEEP NOSCALE) NOT NULL,
  TICKET_ID      NUMBER,
  FILE_NAME      VARCHAR2(255 BYTE),
  FILE_PATH      VARCHAR2(512 BYTE),
  UPLOADED_AT    DATE                           DEFAULT SYSDATE,
  COMMENT_ID     NUMBER,
  FILE_CONTENT   BLOB
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );


ALTER TABLE ADMIN.TICKET_ATTACHMENTS ADD (
  PRIMARY KEY
  (ATTACHMENT_ID)
  USING INDEX
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
                BUFFER_POOL      DEFAULT
               )
  ENABLE VALIDATE);



--
-- AUTO_ASSIGN_LATEST_TICKET  (Procedure) 
--
--  Dependencies: 
--   AGENT_ASSIGNMENT (Table)
--   TICKETS (Table)
--   USERS (Table)
--   STANDARD (Package)
--   SYS_STUB_FOR_PURITY_ANALYSIS (Package)
--
CREATE OR REPLACE PROCEDURE ADMIN.auto_assign_latest_ticket IS
  v_ticket_id      tickets.ticket_id%TYPE;
  v_category_id    tickets.category_id%TYPE;
  v_priority_id    tickets.priority_id%TYPE;
  v_agent_id       users.user_id%TYPE;
BEGIN
  -- Step 1: Get latest unassigned ticket
  SELECT ticket_id, category_id, priority_id
  INTO v_ticket_id, v_category_id, v_priority_id
  FROM (
    SELECT * FROM tickets 
    WHERE assigned_to IS NULL
    ORDER BY created_at DESC
  )
  WHERE ROWNUM = 1;

  -- Step 2: Find the best agent with the lowest load
  SELECT agent_id
  INTO v_agent_id
  FROM (
    SELECT aa.agent_id,
           (SELECT COUNT(*) 
            FROM tickets t 
            WHERE t.assigned_to = aa.agent_id 
              AND t.status_id IN (1, 2)) AS active_ticket_count  -- optional: filter on open tickets
    FROM agent_assignment aa
    WHERE aa.category_id = v_category_id
      AND aa.can_handle_priority >= v_priority_id
    ORDER BY active_ticket_count ASC
  )
  WHERE ROWNUM = 1;

  -- Step 3: Assign the ticket
  UPDATE tickets 
  SET assigned_to = v_agent_id
  WHERE ticket_id = v_ticket_id;

  COMMIT;

EXCEPTION
  WHEN NO_DATA_FOUND THEN
    -- No available agent or no ticket to assign
    NULL;
  WHEN OTHERS THEN
    -- Handle all other errors gracefully
    NULL;
END;
/


--
-- ESCALATE_SLA_LEVELS  (Procedure) 
--
--  Dependencies: 
--   SLA_LEVELS (Table)
--   TICKETS (Table)
--   STANDARD (Package)
--   SYS_STUB_FOR_PURITY_ANALYSIS (Package)
--
CREATE OR REPLACE PROCEDURE ADMIN.escalate_sla_levels IS
BEGIN
  UPDATE tickets
  SET sla_id = (
    SELECT MIN(sla_level_id)
    FROM sla_levels
    WHERE sla_level_id > tickets.sla_id
  )
  WHERE (
    (response_due < SYSDATE OR resolution_due < SYSDATE)
    AND status_id != 3 -- assuming 3 = resolved
    AND sla_id IS NOT NULL
  );

  COMMIT;
END;
/


--
-- ESCALATE_TICKET  (Procedure) 
--
--  Dependencies: 
--   AGENT_ASSIGNMENT (Table)
--   TICKETS (Table)
--   DBMS_OUTPUT (Synonym)
--   STANDARD (Package)
--   SYS_STUB_FOR_PURITY_ANALYSIS (Package)
--
CREATE OR REPLACE PROCEDURE ADMIN.escalate_ticket(p_ticket_id IN NUMBER) IS
  v_current_level NUMBER;
  v_new_agent_id  NUMBER;
  v_category_id   NUMBER;
  v_old_agent     NUMBER;
  v_priority      NUMBER;
BEGIN
  -- Get category, current agent, and current priority
  SELECT category_id, assigned_to, priority_id
  INTO v_category_id, v_old_agent, v_priority
  FROM tickets
  WHERE ticket_id = p_ticket_id;

  -- Get current level
  SELECT level_id
  INTO v_current_level
  FROM agent_assignment
  WHERE agent_id = v_old_agent
    AND category_id = v_category_id
    AND ROWNUM = 1;

  -- Find agent with higher level
  SELECT agent_id
  INTO v_new_agent_id
  FROM (
    SELECT aa.agent_id
    FROM agent_assignment aa
    LEFT JOIN tickets t
      ON t.assigned_to = aa.agent_id AND t.status_id IN (1, 2)
    WHERE aa.category_id = v_category_id
      AND aa.level_id > v_current_level
    GROUP BY aa.agent_id, aa.level_id
    ORDER BY aa.level_id ASC, COUNT(t.ticket_id) ASC
  )
  WHERE ROWNUM = 1;

  -- Update ticket: assign to new agent and increase priority
  UPDATE tickets
  SET assigned_to = v_new_agent_id,
      priority_id = LEAST(v_priority + 1, 4),
      escalated = 1
  WHERE ticket_id = p_ticket_id;

  DBMS_OUTPUT.PUT_LINE(' Escalation done for ticket: ' || p_ticket_id);
EXCEPTION
  WHEN NO_DATA_FOUND THEN
    DBMS_OUTPUT.PUT_LINE(' No higher-level agent found. Escalation skipped.');
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(' Error: ' || SQLERRM);
    RAISE;
END;
/


--
-- AGENT_ACTIVE_TICKET_LOAD  (View) 
--
--  Dependencies: 
--   TICKETS (Table)
--   USERS (Table)
--
CREATE OR REPLACE FORCE VIEW ADMIN.AGENT_ACTIVE_TICKET_LOAD
(AGENT_ID, USERNAME, ACTIVE_TICKET_COUNT)
BEQUEATH DEFINER
AS 
SELECT 
  u.user_id AS agent_id,
  u.username,
  COUNT(t.ticket_id) AS active_ticket_count
FROM users u
LEFT JOIN tickets t ON u.user_id = t.assigned_to
  AND t.status_id IN (1, 2)  -- Assuming 1 = Open, 2 = In Progress
WHERE u.role_id = 2
GROUP BY u.user_id, u.username;


--
-- AGENT_TICKET_LOAD  (View) 
--
--  Dependencies: 
--   TICKETS (Table)
--   USERS (Table)
--
CREATE OR REPLACE FORCE VIEW ADMIN.AGENT_TICKET_LOAD
(AGENT_ID, USERNAME, TOTAL_ASSIGNED_TICKETS)
BEQUEATH DEFINER
AS 
SELECT 
  u.user_id AS agent_id,
  u.username,
  COUNT(t.ticket_id) AS total_assigned_tickets
FROM users u
LEFT JOIN tickets t ON u.user_id = t.assigned_to
WHERE u.role_id = 2
GROUP BY u.user_id, u.username;


--
-- TRG_AUTO_ASSIGN_LATEST  (Trigger) 
--
--  Dependencies: 
--   TICKETS (Table)
--   AUTO_ASSIGN_LATEST_TICKET (Procedure)
--
CREATE OR REPLACE TRIGGER ADMIN.trg_auto_assign_latest
AFTER INSERT ON ADMIN.TICKETS
DISABLE
BEGIN
  auto_assign_latest_ticket;
END;
/


--
-- TRG_BLOCK_ASSIGNMENT_ON_LEAVE  (Trigger) 
--
--  Dependencies: 
--   TICKETS (Table)
--   CALENDAR_UNAVAILABILITY (Table)
--   DBMS_STANDARD (Package)
--   STANDARD (Package)
--
CREATE OR REPLACE TRIGGER ADMIN.trg_block_assignment_on_leave
BEFORE INSERT OR UPDATE ON ADMIN.TICKETS
FOR EACH ROW
DECLARE
  v_count NUMBER;
BEGIN
  IF :NEW.ASSIGNED_TO IS NOT NULL AND :NEW.DUE_DATE IS NOT NULL THEN
    SELECT COUNT(*) INTO v_count
    FROM ADMIN.CALENDAR_UNAVAILABILITY
    WHERE USER_ID = :NEW.ASSIGNED_TO
      AND TRUNC(UNAVAILABLE_DATE) = TRUNC(:NEW.DUE_DATE);

    IF v_count > 0 THEN
      RAISE_APPLICATION_ERROR(-20003, ' Agent is unavailable on this date.');
    END IF;
  END IF;
END;
/


--
-- TRG_REASSIGN_ON_LEAVE  (Trigger) 
--
--  Dependencies: 
--   CALENDAR_UNAVAILABILITY (Table)
--   TICKETS (Table)
--   USERS (Table)
--   PLITBLM (Synonym)
--   DBMS_STANDARD (Package)
--   STANDARD (Package)
--
CREATE OR REPLACE TRIGGER ADMIN.TRG_REASSIGN_ON_LEAVE
FOR INSERT ON ADMIN.CALENDAR_UNAVAILABILITY
COMPOUND TRIGGER

  TYPE t_unavail IS RECORD (
    user_id         NUMBER,
    unavailable_date DATE
  );
  TYPE t_unavail_tab IS TABLE OF t_unavail INDEX BY PLS_INTEGER;
  g_unavail t_unavail_tab;
  g_idx     PLS_INTEGER := 0;

AFTER EACH ROW IS
BEGIN
  g_idx := g_idx + 1;
  g_unavail(g_idx).user_id := :NEW.USER_ID;
  g_unavail(g_idx).unavailable_date := :NEW.UNAVAILABLE_DATE;
END AFTER EACH ROW;

AFTER STATEMENT IS
  v_new_agent_id NUMBER;
BEGIN
  FOR i IN 1 .. g_unavail.COUNT LOOP
    BEGIN
      -- Find available agent not on leave that day (pick the one with least assigned tickets)
      SELECT USER_ID INTO v_new_agent_id
      FROM (
        SELECT U.USER_ID AS USER_ID
        FROM ADMIN.USERS U
        WHERE U.ROLE_ID = 2
          AND NOT EXISTS (
            SELECT 1 FROM ADMIN.CALENDAR_UNAVAILABILITY CU
            WHERE CU.USER_ID = U.USER_ID
            AND CU.UNAVAILABLE_DATE = g_unavail(i).unavailable_date
          )
        ORDER BY (
          SELECT COUNT(*) FROM ADMIN.TICKETS T
          WHERE T.ASSIGNED_TO = U.USER_ID
            AND T.DUE_DATE = g_unavail(i).unavailable_date
        )
      )
      WHERE ROWNUM = 1;

      -- Reassign tickets from unavailable agent to new one for that day
      UPDATE ADMIN.TICKETS
      SET ASSIGNED_TO = v_new_agent_id
      WHERE ASSIGNED_TO = g_unavail(i).user_id
        AND TRUNC(DUE_DATE) = TRUNC(g_unavail(i).unavailable_date)
        AND STATUS_ID IN (1, 2);  -- Only open/in-progress tickets

    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        NULL; -- No available agents, skip reassignment
    END;
  END LOOP;
END AFTER STATEMENT;

END trg_reassign_on_leave;
/


--
-- TRG_SET_DUE_DATE  (Trigger) 
--
--  Dependencies: 
--   TICKETS (Table)
--   STANDARD (Package)
--
CREATE OR REPLACE TRIGGER ADMIN.trg_set_due_date
BEFORE INSERT ON ADMIN.TICKETS
FOR EACH ROW
BEGIN
  IF :NEW.DUE_DATE IS NULL THEN
    CASE :NEW.PRIORITY_ID
      WHEN 1 THEN :NEW.DUE_DATE := SYSDATE + 7; -- Low
      WHEN 2 THEN :NEW.DUE_DATE := SYSDATE + 3; -- Medium
      WHEN 3 THEN :NEW.DUE_DATE := SYSDATE + 1; -- High
      WHEN 4 THEN :NEW.DUE_DATE := SYSDATE + 0.5; -- Critical
    END CASE;
  END IF;
END;
/


--
-- TRG_SET_SLA_ON_INSERT  (Trigger) 
--
--  Dependencies: 
--   TICKETS (Table)
--   SLA_LEVELS (Table)
--   STANDARD (Package)
--
CREATE OR REPLACE TRIGGER ADMIN.trg_set_sla_on_insert
BEFORE INSERT ON ADMIN.TICKETS
FOR EACH ROW
DECLARE
  v_sla_id             SLA_LEVELS.SLA_LEVEL_ID%TYPE;
  v_response_hours     SLA_LEVELS.RESPONSE_TIME_HOURS%TYPE;
  v_resolution_hours   SLA_LEVELS.RESOLUTION_TIME_HOURS%TYPE;
BEGIN
  -- Find SLA level based on PRIORITY_ID
  SELECT SLA_LEVEL_ID, RESPONSE_TIME_HOURS, RESOLUTION_TIME_HOURS
  INTO v_sla_id, v_response_hours, v_resolution_hours
  FROM SLA_LEVELS
  WHERE SLA_LEVEL_ID = :NEW.SLA_ID;

  -- Set SLA ID if not already set (optional safety)
  :NEW.SLA_ID := v_sla_id;

  -- Calculate deadlines
  :NEW.RESPONSE_DUE := SYSTIMESTAMP + v_response_hours / 24;
  :NEW.RESOLUTION_DUE := SYSTIMESTAMP + v_resolution_hours / 24;

EXCEPTION
  WHEN NO_DATA_FOUND THEN
    -- Optional: handle if SLA_ID doesn't exist
    :NEW.RESPONSE_DUE := NULL;
    :NEW.RESOLUTION_DUE := NULL;
END;
/


--
-- TRG_SET_TICKET_SLA  (Trigger) 
--
--  Dependencies: 
--   TICKETS (Table)
--   SLA_LEVELS (Table)
--   STANDARD (Package)
--
CREATE OR REPLACE TRIGGER ADMIN.trg_set_ticket_sla
BEFORE INSERT OR UPDATE ON ADMIN.TICKETS
FOR EACH ROW
DECLARE
  v_response_hours NUMBER;
  v_resolution_hours NUMBER;
BEGIN
  -- Only do this if SLA_ID is provided
  IF :NEW.sla_id IS NOT NULL THEN
    -- Lookup response/resolution times from SLA_LEVELS
    SELECT response_time_hours, resolution_time_hours
    INTO v_response_hours, v_resolution_hours
    FROM sla_levels
    WHERE sla_level_id = :NEW.sla_id;

    -- Ensure CREATED_AT is not NULL (use current date if needed)
    IF :NEW.created_at IS NULL THEN
      :NEW.created_at := SYSDATE;
    END IF;

    -- Set due dates using SLA durations
    :NEW.response_due := :NEW.created_at + (v_response_hours / 24);
    :NEW.resolution_due := :NEW.created_at + (v_resolution_hours / 24);
  END IF;
END;
/


--
-- UPDATE_TICKET_ON_COMMENT  (Trigger) 
--
--  Dependencies: 
--   TICKET_COMMENTS (Table)
--   TICKETS (Table)
--   STANDARD (Package)
--
CREATE OR REPLACE TRIGGER ADMIN.update_ticket_on_comment
AFTER INSERT ON ADMIN.TICKET_COMMENTS
FOR EACH ROW
BEGIN
  UPDATE tickets
  SET updated_at = SYSDATE
  WHERE ticket_id = :NEW.ticket_id;
END;
/


-- 
-- CALENDAR_UNAVAILABILITY  (Table Foreign Keys)
-- 
-- Dependencies: 
--    USERS (Table)
ALTER TABLE ADMIN.CALENDAR_UNAVAILABILITY ADD (
  FOREIGN KEY (USER_ID) 
  REFERENCES ADMIN.USERS (USER_ID)
  ENABLE VALIDATE);


-- 
-- SUBCATEGORIES  (Table Foreign Keys)
-- 
-- Dependencies: 
--    CATEGORIES (Table)
ALTER TABLE ADMIN.SUBCATEGORIES ADD (
  FOREIGN KEY (CATEGORY_ID) 
  REFERENCES ADMIN.CATEGORIES (CATEGORY_ID)
  ON DELETE CASCADE
  ENABLE VALIDATE);


-- 
-- TICKET_COMMENTS  (Table Foreign Keys)
-- 
-- Dependencies: 
--    TICKETS (Table)
--    USERS (Table)
ALTER TABLE ADMIN.TICKET_COMMENTS ADD (
  FOREIGN KEY (TICKET_ID) 
  REFERENCES ADMIN.TICKETS (TICKET_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKET_COMMENTS ADD (
  FOREIGN KEY (COMMENTER_ID) 
  REFERENCES ADMIN.USERS (USER_ID)
  ENABLE VALIDATE);


-- 
-- USERS  (Table Foreign Keys)
-- 
-- Dependencies: 
--    ROLES (Table)
ALTER TABLE ADMIN.USERS ADD (
  FOREIGN KEY (ROLE_ID) 
  REFERENCES ADMIN.ROLES (ROLE_ID)
  ENABLE VALIDATE);


-- 
-- AGENT_ASSIGNMENT  (Table Foreign Keys)
-- 
-- Dependencies: 
--    AGENT_LEVELS (Table)
--    USERS (Table)
ALTER TABLE ADMIN.AGENT_ASSIGNMENT ADD (
  CONSTRAINT FK_AGENT_LEVEL 
  FOREIGN KEY (LEVEL_ID) 
  REFERENCES ADMIN.AGENT_LEVELS (LEVEL_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.AGENT_ASSIGNMENT ADD (
  FOREIGN KEY (AGENT_ID) 
  REFERENCES ADMIN.USERS (USER_ID)
  ENABLE VALIDATE);


-- 
-- TICKETS  (Table Foreign Keys)
-- 
-- Dependencies: 
--    CATEGORIES (Table)
--    SLA_LEVELS (Table)
--    USERS (Table)
--    USERS (Table)
--    TICKET_STATUS (Table)
--    TICKET_PRIORITY (Table)
--    SUBCATEGORIES (Table)
ALTER TABLE ADMIN.TICKETS ADD (
  CONSTRAINT FK_TICKETS_CATEGORY_ID 
  FOREIGN KEY (CATEGORY_ID) 
  REFERENCES ADMIN.CATEGORIES (CATEGORY_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKETS ADD (
  CONSTRAINT FK_TICKET_SLA 
  FOREIGN KEY (SLA_ID) 
  REFERENCES ADMIN.SLA_LEVELS (SLA_LEVEL_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKETS ADD (
  FOREIGN KEY (CREATED_BY) 
  REFERENCES ADMIN.USERS (USER_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKETS ADD (
  FOREIGN KEY (ASSIGNED_TO) 
  REFERENCES ADMIN.USERS (USER_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKETS ADD (
  FOREIGN KEY (STATUS_ID) 
  REFERENCES ADMIN.TICKET_STATUS (STATUS_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKETS ADD (
  FOREIGN KEY (PRIORITY_ID) 
  REFERENCES ADMIN.TICKET_PRIORITY (PRIORITY_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKETS ADD (
  FOREIGN KEY (SUBCATEGORY_ID) 
  REFERENCES ADMIN.SUBCATEGORIES (SUBCATEGORY_ID)
  ENABLE VALIDATE);


-- 
-- TICKET_ATTACHMENTS  (Table Foreign Keys)
-- 
-- Dependencies: 
--    TICKET_COMMENTS (Table)
--    TICKETS (Table)
ALTER TABLE ADMIN.TICKET_ATTACHMENTS ADD (
  CONSTRAINT FK_COMMENT 
  FOREIGN KEY (COMMENT_ID) 
  REFERENCES ADMIN.TICKET_COMMENTS (COMMENT_ID)
  ENABLE VALIDATE);

ALTER TABLE ADMIN.TICKET_ATTACHMENTS ADD (
  FOREIGN KEY (TICKET_ID) 
  REFERENCES ADMIN.TICKETS (TICKET_ID)
  ENABLE VALIDATE);


GRANT READ, WRITE ON DIRECTORY DATA_PUMP_DIR TO EXP_FULL_DATABASE;

GRANT READ, WRITE ON DIRECTORY DATA_PUMP_DIR TO IMP_FULL_DATABASE;

GRANT READ, WRITE ON DIRECTORY ORACLE_OCM_CONFIG_DIR TO ORACLE_OCM;

GRANT READ, WRITE ON DIRECTORY ORACLE_OCM_CONFIG_DIR2 TO ORACLE_OCM;

--
-- Note: 
-- The following objects do not have associated statements.
--
--  ISEQ$$_73065  (Sequence) 
--  ISEQ$$_73069  (Sequence) 
--  ISEQ$$_73078  (Sequence) 
--  ISEQ$$_73082  (Sequence) 
--  ISEQ$$_73086  (Sequence) 
--  ISEQ$$_73091  (Sequence) 
--  ISEQ$$_73566  (Sequence) 
--  ISEQ$$_73569  (Sequence) 
--  ISEQ$$_73578  (Sequence) 
--  ISEQ$$_73827  (Sequence) 
--  ISEQ$$_74264  (Sequence) 
--  ISEQ$$_74267  (Sequence)
